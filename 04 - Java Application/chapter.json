{
  "entries": [
    {
      "type": "chapter",
      "id": "1ada9223-4688-4cee-a307-bbf0e4cfe8b5",
      "parameters": [
        "Java Application"
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "markdown",
      "id": "57869e3b-3fe9-42b6-8c0d-852783906c77",
      "parameters": [
        "In this chapter we will create a simple Java _hello world_ application and will use Gradle to build our application. We",
        "will use different plugins to dependencies to showcase how we can take advantage from Gradle during development.",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "section",
      "id": "3e774315-b995-4bce-85d7-aec2e52c5166",
      "parameters": [
        "Create the project"
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "markdown",
      "id": "65e443fe-231b-46e1-8d9b-13faa14bd06c",
      "parameters": [
        "Let's start by deleting the directory that we will be working on `single-java-project`. This makes sure that there is no",
        "residue and that we are working in a clean slate.",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "command",
      "id": "5eaba0c3-832a-4aef-823b-ec1f3a6de2fd",
      "parameters": [
        "rm -rf 'single-java-project'"
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "markdown",
      "id": "fd18f1ff-8219-41cd-9275-95f6bb48f04c",
      "parameters": [
        "Create the directory.",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "command",
      "id": "4a670889-c4f3-4e1d-b9ea-29bb1a6549a0",
      "parameters": [
        "mkdir 'single-java-project'"
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "markdown",
      "id": "cd66653e-15fe-491c-b4d9-d8e48499fd44",
      "parameters": [
        "Add version control so that we can track our changes.",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "command",
      "id": "5ba242df-1b0c-4b1b-ab98-97ecf231454b",
      "workingDirectory": "single-java-project",
      "parameters": [
        "git init --initial-branch=main"
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "markdown",
      "id": "e392e5fe-01b2-4a73-953b-30432689b1c5",
      "workingDirectory": "single-java-project",
      "parameters": [
        "Set Git's user (_developer_) name, using the providing variable. Press enter after entering your name and the rest will",
        "update automatically.",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "variable",
      "id": "6727d8b9-951e-4a38-9a48-0e5d6fe476f6",
      "name": "DEVELOPER_NAME",
      "workingDirectory": "single-java-project",
      "parameters": [
        "Albert Attard"
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {},
      "sensitive": false
    },
    {
      "type": "markdown",
      "id": "26183d7d-8f9b-4275-83df-d6850e3ab58d",
      "workingDirectory": "single-java-project",
      "parameters": [
        "Set Git's user (_developer_) email, using the providing variable. Press enter after entering your name and the rest will",
        "update automatically. The email is more important than the name as Git uses this to identify you in the event you push",
        "these to a remote repository.",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "variable",
      "id": "a530b6d9-16d0-4a67-b6a5-fc16d994f708",
      "name": "DEVELOPER_EMAIL",
      "workingDirectory": "single-java-project",
      "parameters": [
        "albertattard@gmail.com"
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {},
      "sensitive": false
    },
    {
      "type": "command",
      "id": "2643954e-6574-4103-869b-2defe7f172d6",
      "workingDirectory": "single-java-project",
      "parameters": [
        "git config user.name '${DEVELOPER_NAME}'",
        "git config user.email '${DEVELOPER_EMAIL}'"
      ],
      "variables": [
        "DEVELOPER_NAME",
        "DEVELOPER_EMAIL"
      ],
      "environmentVariables": [],
      "values": {
        "DEVELOPER_NAME": "Albert Attard",
        "DEVELOPER_EMAIL": "albertattard@gmail.com"
      }
    },
    {
      "type": "markdown",
      "id": "4881cd81-8b4d-49a5-ab9f-cf89f1bfc136",
      "workingDirectory": "single-java-project",
      "parameters": [
        "Let's verify that our Git configuration was properly applied.",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "command",
      "id": "92473c0b-2ae3-447f-9356-a4fd112674a0",
      "workingDirectory": "single-java-project",
      "parameters": [
        "git config --list"
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "markdown",
      "id": "20e11046-66e3-47ab-b184-0bbba803ca1f",
      "workingDirectory": "single-java-project",
      "parameters": [
        "Both name and email should be properly set, as shown next.",
        "",
        "```",
        "user.name=${DEVELOPER_NAME}",
        "user.email=${DEVELOPER_EMAIL}",
        "```",
        "",
        "Let's create a basic Gradle project using Groovy as the DSL language.",
        ""
      ],
      "variables": [
        "DEVELOPER_NAME",
        "DEVELOPER_EMAIL"
      ],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "command",
      "id": "661c0ea7-d8ab-4cc1-838f-c90a423b84b5",
      "workingDirectory": "single-java-project",
      "parameters": [
        "gradle init --type basic --dsl groovy --project-name single-java-project"
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {},
      "commandTimeout": 30.000000000
    },
    {
      "type": "markdown",
      "id": "615c7cb0-e31a-4fdd-a56e-3826e04b8fca",
      "workingDirectory": "single-java-project",
      "parameters": [
        "Let's also set the version of Gradle to be used to 7.3.3."
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "command",
      "id": "2243a72e-149f-4c39-8342-3c11f39ed4d2",
      "workingDirectory": "single-java-project",
      "parameters": [
        "./gradlew wrapper --gradle-version=7.3.3"
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {},
      "commandTimeout": 30.000000000
    },
    {
      "type": "markdown",
      "id": "e5e8b55e-0ea6-44a6-92bd-1e6327d4dc49",
      "workingDirectory": "single-java-project",
      "parameters": [
        "Let's update the `.gitignore` file.",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "git-apply-patch",
      "id": "9d707933-c401-463d-aef3-57f7c500ef0b",
      "workingDirectory": "single-java-project",
      "parameters": [
        "diff --git a/.gitignore b/.gitignore",
        "index 1b6985c..e0d53d8 100644",
        "--- a/.gitignore",
        "+++ b/.gitignore",
        "@@ -1,5 +1,5 @@",
        "-# Ignore Gradle project-specific cache directory",
        " .gradle",
        "-",
        "-# Ignore Gradle build output directory",
        "+.idea",
        "+.vscode",
        "+bin",
        " build",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "markdown",
      "id": "cff8c4c5-0931-4393-b695-f13f802f3f48",
      "workingDirectory": "single-java-project",
      "parameters": [
        "And remove the comments from the `settings.gradle` file."
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "git-apply-patch",
      "id": "e505a9d5-616f-463c-8df4-ac9db2ce9ee4",
      "workingDirectory": "single-java-project",
      "parameters": [
        "diff --git a/settings.gradle b/settings.gradle",
        "index 32cbb70..d9a028e 100644",
        "--- a/settings.gradle",
        "+++ b/settings.gradle",
        "@@ -1,10 +1 @@",
        "-/*",
        "- * This file was generated by the Gradle 'init' task.",
        "- *",
        "- * The settings file is used to specify which projects to include in your build.",
        "- *",
        "- * Detailed information about configuring a multi-project build in Gradle can be found",
        "- * in the user manual at https://docs.gradle.org/7.3.3/userguide/multi_project_builds.html",
        "- */",
        "-",
        " rootProject.name = 'single-java-project'",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "markdown",
      "id": "6fe0feaf-b7db-444a-bf3c-4ed6bd436251",
      "workingDirectory": "single-java-project",
      "parameters": [
        "And the `build.gradle` file."
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "git-apply-patch",
      "id": "9b930e53-1bc8-4804-8e90-d629934d4d32",
      "workingDirectory": "single-java-project",
      "parameters": [
        "diff --git a/build.gradle b/build.gradle",
        "index 893ec91..e69de29 100644",
        "--- a/build.gradle",
        "+++ b/build.gradle",
        "@@ -1,6 +0,0 @@",
        "-/*",
        "- * This file was generated by the Gradle 'init' task.",
        "- *",
        "- * This is a general purpose Gradle build.",
        "- * Learn more about Gradle by exploring our samples at https://docs.gradle.org/7.3.3/samples",
        "- */",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "markdown",
      "id": "ed62df0a-54c0-48e0-a718-bfa9372337cf",
      "workingDirectory": "single-java-project",
      "parameters": [
        "Our project us now ready.  Let's commit the changes made so far before moving forward.",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "command",
      "id": "aca12f3b-bfd5-409e-b605-c3977d53c073",
      "workingDirectory": "single-java-project",
      "parameters": [
        "git add .",
        "git commit --message 'Create project'"
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "section",
      "id": "d5799250-3e7c-4ea5-b82a-03ccfeff4898",
      "workingDirectory": "single-java-project",
      "parameters": [
        "The java plugin"
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "markdown",
      "id": "a92cd35a-503d-45ae-be48-794cf7b301ed",
      "workingDirectory": "single-java-project",
      "parameters": [
        "Gradle provides a plugin that can be used with Java projects,",
        "the [`java` Gradle plugin](https://docs.gradle.org/current/userguide/java_plugin.html). This plugin includes tasks,",
        "like [`compileJava`](https://docs.gradle.org/current/dsl/org.gradle.api.tasks.compile.JavaCompile.html)",
        "and [`test`](https://docs.gradle.org/current/dsl/org.gradle.api.tasks.testing.Test.html).",
        "",
        "Let's tag our progress, so that we can refer back to this point in the code if needs be.",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "command",
      "id": "08f5f1da-f604-402d-af61-5049ca9be582",
      "workingDirectory": "single-java-project",
      "parameters": [
        "git tag --annotate 'v1' --message 'The java plugin'"
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "git-apply-patch",
      "id": "ffcfc3fb-c832-436b-970c-7f8159c195fa",
      "workingDirectory": "single-java-project",
      "parameters": [
        "diff --git a/build.gradle b/build.gradle",
        "index e69de29..075ba3d 100644",
        "--- a/build.gradle",
        "+++ b/build.gradle",
        "@@ -0,0 +1,3 @@",
        "+plugins {",
        "+    id 'java'",
        "+}",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "markdown",
      "id": "41c84de7-e73a-4e0b-9aed-0b8de728e16d",
      "workingDirectory": "single-java-project",
      "parameters": [
        "Let's list the tasks now available to our project to see what new tasks are available now that we have the `java` plugin."
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "command",
      "id": "d31f675d-b085-4d16-a63c-4502354a429a",
      "workingDirectory": "single-java-project",
      "parameters": [
        "./gradlew tasks"
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "markdown",
      "id": "d31a3569-f77c-40f6-bc22-61d386265273",
      "workingDirectory": "single-java-project",
      "parameters": [
        "Two new groups, the _Build tasks_ and the _Verification tasks_ are added.",
        "",
        "```",
        "Build tasks",
        "-----------",
        "assemble - Assembles the outputs of this project.",
        "build - Assembles and tests this project.",
        "buildDependents - Assembles and tests this project and all projects that depend on it.",
        "buildNeeded - Assembles and tests this project and all projects it depends on.",
        "classes - Assembles main classes.",
        "clean - Deletes the build directory.",
        "jar - Assembles a jar archive containing the main classes.",
        "testClasses - Assembles test classes.",
        "```",
        "",
        "```",
        "Verification tasks",
        "------------------",
        "check - Runs all checks.",
        "test - Runs the test suite.",
        "```",
        "",
        "The following image (copied from [here](https://docs.gradle.org/current/userguide/java_plugin.html#lifecycle_tasks))",
        "shows all these tasks and their dependencies.",
        "",
        "![Figure 1. Java plugin - tasks](https://docs.gradle.org/current/userguide/img/javaPluginTasks.png)",
        "",
        "The `java` plugin adds",
        "the [`java` extension](https://docs.gradle.org/current/dsl/org.gradle.api.plugins.JavaPluginExtension.html) to the",
        "project. This allows to configure a number of Java related properties, such as the version of Java to be used. Similar",
        "to the Gradle wrapper, this ensures that the same Java version is used irrespective from where the project is compiled.",
        "",
        "Let's set Oracle's Java 17 as our version of Java."
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "git-apply-patch",
      "id": "e7519880-04f6-4d98-ad5f-bd16f57fad27",
      "workingDirectory": "single-java-project",
      "parameters": [
        "diff --git a/build.gradle b/build.gradle",
        "index 075ba3d..336da42 100644",
        "--- a/build.gradle",
        "+++ b/build.gradle",
        "@@ -1,3 +1,10 @@",
        " plugins {",
        "     id 'java'",
        " }",
        "+",
        "+java {",
        "+    toolchain {",
        "+        languageVersion = JavaLanguageVersion.of(17)",
        "+        vendor = JvmVendorSpec.ORACLE",
        "+    }",
        "+}",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "markdown",
      "id": "82277079-da06-4ffe-a7ed-8b78f9995dba",
      "workingDirectory": "single-java-project",
      "parameters": [
        "- **What happens if that version of Java is not installed?**",
        "",
        "  Gradle will download that particular version of Java and use it to run the tasks. Say that we have Java 8 installed,",
        "  and we like to compile the code with Java 17. If we include",
        "  the [`toolchain`](https://docs.gradle.org/current/userguide/toolchains.html), then Gradle will download the right",
        "  version of Java first and then run the task. In other words, Java 17 is first downloaded and then Gradle uses this",
        "  Java 17 to compile the Java code, for example.",
        "",
        "- **What's the difference between",
        "  the [`sourceCompatibility`](https://docs.gradle.org/current/dsl/org.gradle.api.plugins.JavaPluginExtension.html#org.gradle.api.plugins.JavaPluginExtension:sourceCompatibility)",
        "  and the `toolchain`?**",
        "",
        "  In the previous version of Gradle, we used the following approach to set the version of Java to be used.",
        "",
        "  ```",
        "  java {",
        "    sourceCompatibility = JavaVersion.VERSION_17",
        "    targetCompatibility = JavaVersion.VERSION_17",
        "  }",
        "  ```",
        "",
        "  This approach merely indicates what version we required, but stops there. If we have an older version of Java, Gradle",
        "  will still try to run the task with the older version.",
        "",
        "  The `toolchain` was added to Gradle to address this problem. Gradle detects what versions of Java are available",
        "  locally and will download if it does not already exist. Furthermore, this ensures that the project is compiled with",
        "  the same version of Java irrespective from where this is executed, be it the developer's laptops' or the pipeline.",
        "",
        "Maven has introduces",
        "a [directory structure for Java projects](https://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html)",
        "and Gradle kept the same structure. We can change this using the `sourceSet` configuration, but it's best if you don't",
        "change it. Other developers have grown custom to this directory structure and changing it may make it harder for others",
        "to get used to your project. For example, the Java source file goes under the `src/main/java` directory and that's where",
        "programmers who are used to Maven and Gradle expect it to be.",
        "",
        "Let's create the required directory structure.",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "command",
      "id": "4828617f-e984-434e-959a-bd5f69a78027",
      "workingDirectory": "single-java-project",
      "parameters": [
        "mkdir -p src/main/java",
        "mkdir -p src/main/resources",
        "mkdir -p src/test/java",
        "mkdir -p src/test/resources"
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "markdown",
      "id": "40a568d6-cc5b-4ae3-9761-ba1334c0ad89",
      "workingDirectory": "single-java-project",
      "parameters": [
        "All our source files will go under the `src` director, including the tests. Other programming languages, like",
        "Javascript, use a different directory structure and separate the tests into a dedicated `test` root folder. The `src`",
        "directory has two subdirectories, the `main` and `test`. The production code goes in the `main` while the test code goes",
        "in the `test` directory.",
        "",
        "- **Where would you put the integration tests?**",
        "",
        "  While this depends on the team, it is a good practice to separate these tests into their own directory, such",
        "  as `integrationTest`. You can set up",
        "  this [manually](https://docs.gradle.org/current/userguide/java_testing.html#sec:configuring_java_integration_tests) or",
        "  use a plugin, such as the [Gradle TestSets plugin](https://github.com/unbroken-dome/gradle-testsets-plugin).",
        "  Alternatively you can use",
        "  new [`testing` extension](https://docs.gradle.org/current/dsl/org.gradle.testing.base.TestingExtension.html).",
        "",
        "Let's explore the `src` directory."
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "command",
      "id": "30c7f8a1-6065-4933-b0af-b164ac3ca563",
      "workingDirectory": "single-java-project",
      "parameters": [
        "tree src"
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "markdown",
      "id": "5a1476c3-7182-4d02-bbaf-b49513a1b95f",
      "workingDirectory": "single-java-project",
      "parameters": [
        "The `src` directory should have the following directory structure.",
        "",
        "```",
        "src",
        "|-- main",
        "|   |-- java",
        "|   `-- resources",
        "`-- test",
        "    |-- java",
        "    `-- resources",
        "",
        "6 directories, 0 files",
        "```",
        "",
        "We will create a simple class called `Main.java` (unoriginal, I know) and will put this in a package (directory)",
        "named `gbc`, short for _**G**radle **B**oot **C**amp_. We will start by creating a new directory named `gbc` within",
        "the `src/main/java`.",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "command",
      "id": "cf4d585b-64e1-47d9-9cd0-16ee2a153afa",
      "workingDirectory": "single-java-project",
      "parameters": [
        "mkdir src/main/java/gbc"
      ],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "markdown",
      "id": "4f24692b-31d7-4758-95be-e68f9a7be616",
      "workingDirectory": "single-java-project",
      "parameters": [
        "Let's create the `Main.java` source file in this directory.",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "command",
      "id": "1e280391-049e-471d-99ab-d3607ba48ec3",
      "workingDirectory": "single-java-project",
      "parameters": [
        "touch src/main/java/gbc/Main.java"
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "markdown",
      "id": "0fe3ae9b-4c13-406a-87f6-4ec20630fddf",
      "workingDirectory": "single-java-project",
      "parameters": [
        "Let's define the class and create the _main_ method."
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "git-apply-patch",
      "id": "f9df87c7-8d71-47c5-bb51-f067a2f9fc7c",
      "workingDirectory": "single-java-project",
      "parameters": [
        "diff --git a/src/main/java/gbc/Main.java b/src/main/java/gbc/Main.java",
        "index e69de29..12cd63c 100644",
        "--- a/src/main/java/gbc/Main.java",
        "+++ b/src/main/java/gbc/Main.java",
        "@@ -0,0 +1,7 @@",
        "+package gbc;",
        "+",
        "+public class Main {",
        "+    public static void main(final String[] args) {",
        "+        System.out.println(\"Gradle boot camp\");",
        "+    }",
        "+}",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "markdown",
      "id": "df21fed1-ee0c-4a3a-8357-33fd8dd3ba6b",
      "workingDirectory": "single-java-project",
      "parameters": [
        "In the attempt to be a bit different, we are printing `Gradle boot camp` to the standard output rather than the",
        "traditional `Hello world!!`.",
        "",
        "Now that we are all set, let's compile our application. We can use the `compileJava` task or the `assemble` task or",
        "the `build` task. The latter runs everything for us, and it is quite convenient as it will also run the tests if we had",
        "any.",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "command",
      "id": "d374306f-2ce9-4dc9-8828-6d1c6b199d54",
      "workingDirectory": "single-java-project",
      "parameters": [
        "./gradlew build"
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {},
      "commandTimeout": 30.000000000
    },
    {
      "type": "markdown",
      "id": "05b7ea5d-ca53-4255-89e1-2e1813588710",
      "workingDirectory": "single-java-project",
      "parameters": [
        "When we run the `build` task, the Java source files are compiled by the `compileJava` task. The compiled Java classes",
        "are saved under the `build\\classes` directory. The `build` directory is Gradle's default output directory where all the",
        "build artefacts are stored. Let's see what's inside this directory.",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "command",
      "id": "4abb6059-0159-4c93-b477-8fc31f25d75a",
      "workingDirectory": "single-java-project",
      "parameters": [
        "tree build"
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "markdown",
      "id": "8a8ca2ca-adc6-4e3d-a4f7-49871dd5f0fa",
      "workingDirectory": "single-java-project",
      "parameters": [
        "The build directory contains several other subdirectories, as shown next.",
        "",
        "```",
        "build",
        "|-- classes",
        "|   `-- java",
        "|       `-- main",
        "|           `-- gbc",
        "|               `-- Main.class",
        "|-- generated",
        "|   `-- sources",
        "|       |-- annotationProcessor",
        "|       |   `-- java",
        "|       |       `-- main",
        "|       `-- headers",
        "|           `-- java",
        "|               `-- main",
        "|-- libs",
        "|   `-- single-java-project.jar",
        "`-- tmp",
        "    |-- compileJava",
        "    |   `-- previous-compilation-data.bin",
        "    `-- jar",
        "        `-- MANIFEST.MF",
        "",
        "16 directories, 4 files",
        "```",
        "",
        "Our compiled classes go in the `classes` subdirectory, while",
        "the [Jar files](https://docs.oracle.com/en/java/javase/17/docs/specs/jar/jar.html) are saved under the `lib`",
        "subdirectory.",
        "",
        "Let's run our application using Java, and not Gradle.",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "command",
      "id": "2083de35-8539-4c58-a2cd-9b8309f2fd97",
      "workingDirectory": "single-java-project",
      "parameters": [
        "java -cp 'build/classes/java/main' gbc.Main"
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "markdown",
      "id": "952e9f0f-d2b3-4777-bf82-8f02d1977cf2",
      "workingDirectory": "single-java-project",
      "parameters": [
        "We need to make use of the `-cp` argument to set the classpath and point this to the `main` directory and not the",
        "package. Please refer to",
        "the [Standard Options for Java](https://docs.oracle.com/en/java/javase/17/docs/specs/man/java.html#standard-options-for-java)",
        "section for a complete list of available options. Then we need specify the full qualified name of the class, which",
        "comprise its package and the class name, `gbc.Main`.",
        "",
        "This should print out our message to the standard output (also referred to the terminal or console).",
        "",
        "```",
        "Gradle boot camp",
        "```",
        "",
        "The Gradle `build` task also invoked the `assemble` task which in turn invokes",
        "the [`jar` task](https://docs.gradle.org/current/dsl/org.gradle.api.tasks.bundling.Jar.html). The `jar` task packages",
        "our application into a Jar file. Let's try running our application using the `-jar` argument.",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "command",
      "id": "d2ef5df8-8992-45dd-9ac7-888f8ac97962",
      "workingDirectory": "single-java-project",
      "parameters": [
        "java -jar 'build/libs/single-java-project.jar'"
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {},
      "expectedExitValue": 1
    },
    {
      "type": "markdown",
      "id": "c907ac88-795e-42e3-b78f-6b67c1c8e9a6",
      "workingDirectory": "single-java-project",
      "parameters": [
        "The command failed.",
        "",
        "```",
        "no main manifest attribute, in build/libs/single-java-project.jar",
        "```",
        "",
        "Java does not know which class to run, even if our application/Jar-file only contains one class. We need to specify",
        "the _main_ class.  We can use the `-cp` argument we used before.",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "command",
      "id": "8229fc68-1679-48f9-8ddb-9c2f392199cd",
      "workingDirectory": "single-java-project",
      "parameters": [
        "java -cp 'build/libs/single-java-project.jar' gbc.Main"
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "markdown",
      "id": "8ba51dbc-afb9-4097-b069-121b71bf350d",
      "workingDirectory": "single-java-project",
      "parameters": [
        "This is equivalent to our first attempt to run the example, only this time we are pointing to a Jar file instead of a",
        "directory. This approach requires you to know what's inside the Jar file. You need to know where the _main_ method is. A",
        "better approach is to update the manifest file, `MANIFEST.MF`, and set the `Main-Class` attribute (or property).",
        "",
        "The `jar` Gradle task can be configured to do just that using",
        "the [`manifest`](https://docs.gradle.org/current/dsl/org.gradle.jvm.tasks.Jar.html#org.gradle.jvm.tasks.Jar:manifest)",
        "property.",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "git-apply-patch",
      "id": "a2593296-359f-47c1-a5ce-6d7d4aab697e",
      "workingDirectory": "single-java-project",
      "parameters": [
        "diff --git a/build.gradle b/build.gradle",
        "index 336da42..c8741d0 100644",
        "--- a/build.gradle",
        "+++ b/build.gradle",
        "@@ -8,3 +8,9 @@ java {",
        "         vendor = JvmVendorSpec.ORACLE",
        "     }",
        " }",
        "+",
        "+tasks.named('jar') {",
        "+    manifest {",
        "+        attributes('Main-Class': 'gbc.Main')",
        "+    }",
        "+}",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "markdown",
      "id": "7134e720-e580-4de4-bb98-4696d0505a6a",
      "workingDirectory": "single-java-project",
      "parameters": [
        "Given that we only want to create the Jar file, we can simply run the `jar` Gradle task and not the entire build. Gradle",
        "is clever enough to only do what's needed and in this case it would probably take the same time to complete.",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "command",
      "id": "c5c112b3-8252-4a65-beaf-9937709cdd32",
      "workingDirectory": "single-java-project",
      "parameters": [
        "./gradlew jar"
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "markdown",
      "id": "55ce1460-e63d-437c-8748-6aae9853aeae",
      "workingDirectory": "single-java-project",
      "parameters": [
        "Let's try to run our Jar file, once more."
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "command",
      "id": "f958f5f2-c65f-4df0-9ff8-70d900e63b09",
      "workingDirectory": "single-java-project",
      "parameters": [
        "java -jar 'build/libs/single-java-project.jar'"
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "markdown",
      "id": "db4e0066-6c4b-4254-8ab6-eba91d255070",
      "workingDirectory": "single-java-project",
      "parameters": [
        "This time it works as Java can use the `MANIFEST.MD` file to determine the _main_ class and runs it.",
        "",
        "We now have created a simple Java application and used Gradle to compile it, set the Jar file's entry point and packaged",
        "everything into a single Jar file. Let's commit our progress before moving to the next section.",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "command",
      "id": "9f0416f8-70a5-4f4d-af8e-9ce381939873",
      "workingDirectory": "single-java-project",
      "parameters": [
        "git add .",
        "git commit --message 'Add java plugin'"
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "section",
      "id": "c990c43d-51be-486a-8ccf-f14b8eb83e84",
      "workingDirectory": "single-java-project",
      "parameters": [
        "The application plugin"
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "markdown",
      "id": "ec90336a-972f-47ad-8b34-918dc4fd748f",
      "workingDirectory": "single-java-project",
      "parameters": [
        "So far we built and packaged our application using several Gradle tasks, such as `compileJava` and `jar`. But we did not",
        "run the application using Gradle, and instead we used Java for that. We can make use from another plugin,",
        "the [`application` plugin](https://docs.gradle.org/current/userguide/application_plugin.html), which provides additional",
        "tasks to the `java` plugin.",
        "",
        "Let's start by tagging the current state of the project, before proceeding.",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "command",
      "id": "ddb88e98-551f-4acf-93db-af96a779bbfe",
      "workingDirectory": "single-java-project",
      "parameters": [
        "git tag --annotate 'v2' --message 'The application plugin'"
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "markdown",
      "id": "c42faaa1-ead4-46a7-bf68-f748dc094a17",
      "workingDirectory": "single-java-project",
      "parameters": [
        "The `application` plugin extends the `java` plugin. We can replace the `java` plugin with the `application` plugin.",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "git-apply-patch",
      "id": "7dff3a95-3a62-45e7-af51-41e1970c3533",
      "workingDirectory": "single-java-project",
      "parameters": [
        "diff --git a/build.gradle b/build.gradle",
        "index c8741d0..201cc87 100644",
        "--- a/build.gradle",
        "+++ b/build.gradle",
        "@@ -1,5 +1,5 @@",
        " plugins {",
        "-    id 'java'",
        "+    id 'application'",
        " }",
        " ",
        " java {",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "markdown",
      "id": "7e4d59a6-4cb5-406a-8a5a-d974a9031edc",
      "workingDirectory": "single-java-project",
      "parameters": [
        "The `application` plugin",
        "adds [new tasks](https://docs.gradle.org/current/userguide/application_plugin.html#sec:application_tasks) to our",
        "project, such as the `run` task.",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "command",
      "id": "f674f7cd-10fa-4d13-bfa5-2c342c1294ce",
      "workingDirectory": "single-java-project",
      "parameters": [
        "./gradlew tasks"
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "markdown",
      "id": "2a825c8b-809c-4d50-a876-5a74509ae059",
      "workingDirectory": "single-java-project",
      "parameters": [
        "The `run` task can be found under the _Application tasks_ group.",
        "",
        "```",
        "Application tasks",
        "-----------------",
        "run - Runs this project as a JVM application",
        "```",
        "",
        "Let's run our application using the `run` task.",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "command",
      "id": "25725513-d483-4137-afbf-f477be7510d2",
      "workingDirectory": "single-java-project",
      "parameters": [
        "./gradlew run"
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {},
      "expectedExitValue": 1
    },
    {
      "type": "markdown",
      "id": "e52733b5-ad98-48aa-9d3d-79fa3b5983b3",
      "workingDirectory": "single-java-project",
      "parameters": [
        "The `run` task fails with a similar message we had before, when we tried to run the Jar file without setting",
        "the `Main-class` in the `MANIFEST.MD` file.",
        "",
        "```",
        "* What went wrong:",
        "Execution failed for task ':run'.",
        "> No main class specified and classpath is not an executable jar.",
        "```",
        "",
        "We need to configure the application and set",
        "the [`mainClass` property](https://docs.gradle.org/current/dsl/org.gradle.api.plugins.JavaApplication.html#org.gradle.api.plugins.JavaApplication:mainClass).",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "git-apply-patch",
      "id": "94ffcbc7-36f8-413c-8a36-14440c71137a",
      "workingDirectory": "single-java-project",
      "parameters": [
        "diff --git a/build.gradle b/build.gradle",
        "index 201cc87..3214c64 100644",
        "--- a/build.gradle",
        "+++ b/build.gradle",
        "@@ -9,6 +9,10 @@ java {",
        "     }",
        " }",
        " ",
        "+application {",
        "+    mainClass = 'gbc.Main'",
        "+}",
        "+",
        " tasks.named('jar') {",
        "     manifest {",
        "         attributes('Main-Class': 'gbc.Main')",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "markdown",
      "id": "5138b9bf-9667-4f93-967e-6c76a0ed7ddb",
      "workingDirectory": "single-java-project",
      "parameters": [
        "- **Why are we configuring the `application` differently from the `jar`?**",
        "",
        "  The `application` is a plugin while the `jar` is a task. We can use similar syntax to configure the `jar` tasks and",
        "  many examples use the following syntax as it is less verbose.",
        "",
        "  ```",
        "  jar {",
        "    manifest {",
        "        attributes('Main-Class': 'gbc.Main')",
        "    }",
        "  }",
        "  ```",
        "",
        "  While this works as expected, it loads the task eagerly. It is recommended to configure the tasks using a lazy",
        "  configuration approach, such as `tasks.named('jar') { }`.",
        "",
        "Let's run the application again."
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "command",
      "id": "0f7d96b1-0039-4c0b-81ee-bce4f472f2b4",
      "workingDirectory": "single-java-project",
      "parameters": [
        "./gradlew run"
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "markdown",
      "id": "07fdd30a-2e49-49d8-b909-5e929419c954",
      "workingDirectory": "single-java-project",
      "parameters": [
        "The Gradle `run` tasks works as expected.",
        "",
        "```",
        "> Task :run",
        "Gradle boot camp",
        "```",
        "",
        "Note that both the `jar` and the `application` are pointing to the same class, `gbc.Main`. The `jar` task can refer to",
        "the `application`'s `mainClass` instead, making it easier to maintain."
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "git-apply-patch",
      "id": "e4a6e4e9-0b7d-44c3-b30a-d54eea81c4dc",
      "workingDirectory": "single-java-project",
      "parameters": [
        "diff --git a/build.gradle b/build.gradle",
        "index 3214c64..093551e 100644",
        "--- a/build.gradle",
        "+++ b/build.gradle",
        "@@ -15,6 +15,6 @@ application {",
        " ",
        " tasks.named('jar') {",
        "     manifest {",
        "-        attributes('Main-Class': 'gbc.Main')",
        "+        attributes('Main-Class': application.mainClass)",
        "     }",
        " }",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "markdown",
      "id": "1c42876d-6504-424f-abe8-27409b3a1651",
      "workingDirectory": "single-java-project",
      "parameters": [
        "Let's re-create the Jar file again to make sure that all is working well.",
        "",
        "Ideally we capture this in a test and automate all the testing as much as possible, instead of trying things manually.",
        "We will cover testing later on and will introduce a test then.",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "command",
      "id": "ece184da-0e5a-4ef4-a32b-c48fc846fc7e",
      "workingDirectory": "single-java-project",
      "parameters": [
        "./gradlew jar"
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "markdown",
      "id": "fed0550f-9e9b-4224-b339-14ff58e8d5dd",
      "workingDirectory": "single-java-project",
      "parameters": [
        "Let's run the application again, using the `java -jar` and not Gradle to make sure that the `MANIFEST.MD` file is",
        "properly set.",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "command",
      "id": "2428fcb1-55d2-4f3f-a741-4c0d6e85acc2",
      "workingDirectory": "single-java-project",
      "parameters": [
        "java -jar 'build/libs/single-java-project.jar'"
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "markdown",
      "id": "24a9b458-0cb9-41b7-a121-d5a02ebe9a04",
      "workingDirectory": "single-java-project",
      "parameters": [
        "We are all set. We switched to the `application` plugin and configure the Jar file entry point. Let's commit our changes",
        "before moving on to the next section.",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "command",
      "id": "4b095c67-0283-4aa0-bd50-45e334cab395",
      "workingDirectory": "single-java-project",
      "parameters": [
        "git add .",
        "git commit --message 'Use the application plugin'"
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "section",
      "id": "c64f10ab-ca43-47f8-86e6-523fc9d60ae2",
      "workingDirectory": "single-java-project",
      "parameters": [
        "Dependencies"
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "markdown",
      "id": "747e106b-81dc-4936-ac35-9181b85a6b53",
      "workingDirectory": "single-java-project",
      "parameters": [
        "Applications use third-party dependencies, and so far we have not used any. In this section we will make use of the (",
        "infamous) [log4j logging library](https://logging.apache.org/log4j/2.x/) to demonstrate further plugins.",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "command",
      "id": "f4c847a4-489b-4268-8172-246d2450a6dd",
      "workingDirectory": "single-java-project",
      "parameters": [
        "git tag --annotate 'v3' --message 'Dependencies'"
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "markdown",
      "id": "d388d597-3aa8-4bc0-ba20-a80c43e1a397",
      "workingDirectory": "single-java-project",
      "parameters": [
        "The [`java` plugin](https://docs.gradle.org/current/userguide/java_plugin.html#sec:java_plugin_and_dependency_management)",
        "adds a number",
        "of [dependency configurations](https://docs.gradle.org/current/userguide/declaring_dependencies.html#sec:what-are-dependency-configurations)",
        "to our project.",
        "",
        "Let's add an out-date version of log4j. Kindly note that this version of log4j has security vulnerabilities and should",
        "not be used.  We are using this version here for demonstration purposes, and it will be updated at a later stage.",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "git-apply-patch",
      "id": "11a0a9ea-f215-4462-a954-1482cd2ba22e",
      "workingDirectory": "single-java-project",
      "parameters": [
        "diff --git a/build.gradle b/build.gradle",
        "index 093551e..d4bb980 100644",
        "--- a/build.gradle",
        "+++ b/build.gradle",
        "@@ -18,3 +18,7 @@ tasks.named('jar') {",
        "         attributes('Main-Class': application.mainClass)",
        "     }",
        " }",
        "+",
        "+dependencies {",
        "+    implementation 'org.apache.logging.log4j:log4j-slf4j-impl:2.14.1'",
        "+}",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "markdown",
      "id": "19bfd205-96ee-41dd-b1bb-ebd118cc4cc6",
      "workingDirectory": "single-java-project",
      "parameters": [
        "Let's build the application, using the Gradle `build` task."
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "command",
      "id": "7011eb68-4e15-4314-aded-3fdf64661318",
      "workingDirectory": "single-java-project",
      "parameters": [
        "./gradlew build"
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {},
      "expectedExitValue": 1
    },
    {
      "type": "markdown",
      "id": "031436e1-7453-4010-8e64-c4a3ba04909c",
      "workingDirectory": "single-java-project",
      "parameters": [
        "The `build` task fails.",
        "",
        "```",
        "* What went wrong:",
        "Execution failed for task ':compileJava'.",
        "> Could not resolve all files for configuration ':compileClasspath'.",
        "   > Cannot resolve external dependency org.apache.logging.log4j:log4j-slf4j-impl:2.14.1 because no repositories are defined.",
        "```",
        "",
        "The message contains our solution. We have not configured the repositories from where Gradle can download these",
        "dependencies.",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "git-apply-patch",
      "id": "801f7f7b-580a-4858-b6cb-8253647262be",
      "workingDirectory": "single-java-project",
      "parameters": [
        "diff --git a/build.gradle b/build.gradle",
        "index d4bb980..47fe21e 100644",
        "--- a/build.gradle",
        "+++ b/build.gradle",
        "@@ -19,6 +19,10 @@ tasks.named('jar') {",
        "     }",
        " }",
        " ",
        "+repositories {",
        "+    mavenCentral()",
        "+}",
        "+",
        " dependencies {",
        "     implementation 'org.apache.logging.log4j:log4j-slf4j-impl:2.14.1'",
        " }",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "markdown",
      "id": "382dc809-c325-47ac-87d6-c81a45854016",
      "workingDirectory": "single-java-project",
      "parameters": [
        "We instructed Gradle to use [Maven repository](https://mvnrepository.com/). We can have multiple repositories, including",
        "internal ones only accessible to the organisation we work for. This is quite a common practice where companies screen",
        "the dependencies and only allow the use of trusted dependencies.",
        "",
        "Let's build the project once more.",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "command",
      "id": "6ea14355-719b-444a-9a24-f09aed6b483c",
      "workingDirectory": "single-java-project",
      "parameters": [
        "./gradlew build"
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {},
      "commandTimeout": 30.000000000
    },
    {
      "type": "markdown",
      "id": "b685ce35-8ab6-4c75-abde-dbf9e07ce36b",
      "workingDirectory": "single-java-project",
      "parameters": [
        "The `build` task may take a bit longer to run as it needs to download the dependencies, if these do not already exist.",
        "",
        "- **Where are the dependencies saved?**",
        "",
        "  By default, Gradle saves the dependencies under the `~/.gradle/caches/modules-2` directory. You can check what's",
        "  dependencies are downloaded using the following command.",
        "",
        "  ```",
        "  ls -l ~/.gradle/caches/modules-2/files-2.1",
        "  ```",
        "",
        "  Please note that this may produce a long list of dependencies, depending on how many dependencies you have",
        "  already downloaded.",
        "",
        "Let's update our class to make sure of the logger instead of simply printing to the standard output."
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "git-apply-patch",
      "id": "88226605-054d-4ff2-989a-002fe71d60b4",
      "workingDirectory": "single-java-project",
      "parameters": [
        "diff --git a/src/main/java/gbc/Main.java b/src/main/java/gbc/Main.java",
        "index 12cd63c..7a005c0 100644",
        "--- a/src/main/java/gbc/Main.java",
        "+++ b/src/main/java/gbc/Main.java",
        "@@ -1,7 +1,12 @@",
        " package gbc;",
        " ",
        "+import org.slf4j.Logger;",
        "+import org.slf4j.LoggerFactory;",
        "+",
        " public class Main {",
        "+",
        "+    private static final Logger LOGGER = LoggerFactory.getLogger(Main.class);",
        "     public static void main(final String[] args) {",
        "-        System.out.println(\"Gradle boot camp\");",
        "+        LOGGER.debug(\"Gradle boot camp\");",
        "     }",
        " }",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "markdown",
      "id": "8373c0dd-2267-4f0d-ab50-f0789d47f004",
      "workingDirectory": "single-java-project",
      "parameters": [
        "- **What is the difference between the [SLF4J](https://www.slf4j.org/) and the Log4J?**",
        "",
        "  SLF4J is a logging [Faade](https://en.wikipedia.org/wiki/Facade_pattern), while Log4J is a logger. Instead of working",
        "  directly with a logger, such as",
        "  Log4J, [Java Logger](https://docs.oracle.com/en/java/javase/17/docs/api/java.logging/java/util/logging/Logger.html)",
        "  or [logback](https://logback.qos.ch/) to name a few, we can use a faade and then configure the faade to pass all",
        "  logging requests to a specific implementation, such as Log4J, Java Logger, or logback.",
        "",
        "  The advantage of this approach is that our code becomes disconnected from the logging library, and we can switch from",
        "  one implementation to the next without having to change our code.",
        "",
        "Let's run the application again.",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "command",
      "id": "49e5cd6a-a562-49bd-9895-9e61aced9719",
      "workingDirectory": "single-java-project",
      "parameters": [
        "./gradlew run"
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "markdown",
      "id": "b332c747-e91f-44e5-925b-4719b8e59759",
      "workingDirectory": "single-java-project",
      "parameters": [
        "The application did not output anything to the standard output anymore. The following warnings may also appear instead.",
        "",
        "```",
        "> Task :run",
        "log4j:WARN Please initialize the log4j system properly.",
        "log4j:WARN No appenders could be found for logger (gbc.Main).",
        "log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.",
        "```",
        "",
        "We need to configure the logger such that it prints to the standard output. Each logger implementation has its own",
        "configuration. The new version of Log4J (referred to as _Log4J 2_) make use of",
        "the `src/main/resources/log4j2.properties` file. Let's start by creating this file.",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "command",
      "id": "3ed7fbb9-a4b5-4dac-8bfa-b7880268594c",
      "workingDirectory": "single-java-project",
      "parameters": [
        "touch 'src/main/resources/log4j2.properties'"
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "markdown",
      "id": "4decdb55-1ae6-4901-86cb-1acf4dcb895a",
      "workingDirectory": "single-java-project",
      "parameters": [
        "- **How come the `log4j2.properties` file was created under the `resources` directory?**",
        "",
        "  The Java source file are expected to be placed under the `src/main/java` directory. If we have Kotlin source files,",
        "  these are expected to be found under the `src/main/kotlin` directory. Properties files, like the `log4j2.properties`,",
        "  are expected to be placed under the `src/main/resources` together with other files that are not source code, but are",
        "  still required by the program.",
        "  The [`processResources` task](https://docs.gradle.org/current/userguide/java_plugin.html#sec:java_tasks), will copy",
        "  these files and make them available with the rest of the compiled classes.",
        "",
        "Let's configure the Log4J so that it prints everything to the standard output.",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "git-apply-patch",
      "id": "61a0e4fb-50b8-49ea-a13a-769ca4bc4594",
      "workingDirectory": "single-java-project",
      "parameters": [
        "diff --git a/src/main/resources/log4j2.properties b/src/main/resources/log4j2.properties",
        "index e69de29..ce302aa 100644",
        "--- a/src/main/resources/log4j2.properties",
        "+++ b/src/main/resources/log4j2.properties",
        "@@ -0,0 +1,10 @@",
        "+appenders=stdout",
        "+",
        "+appender.stdout.type = Console",
        "+appender.stdout.name = stdout",
        "+appender.stdout.layout.type = PatternLayout",
        "+appender.stdout.layout.pattern = [%d{dd-MMM-yyy HH:mm:ss:SSS}] [%p] [%c{1}:%L] - %m%n",
        "+",
        "+rootLogger.level = debug",
        "+rootLogger.appenderRefs = a",
        "+rootLogger.appenderRef.a.ref = stdout",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "markdown",
      "id": "d245efe6-6233-4526-a431-580e460f18aa",
      "workingDirectory": "single-java-project",
      "parameters": [
        "Let's run the application again.",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "command",
      "id": "41e59501-ad2c-422c-aa06-9dc1b422f423",
      "workingDirectory": "single-java-project",
      "parameters": [
        "./gradlew run"
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "markdown",
      "id": "9bad9952-08c1-40b8-8789-84af15a0c94f",
      "workingDirectory": "single-java-project",
      "parameters": [
        "Note that this time, our program printed the `Gradle boot camp` and included other (fancy) information.",
        "",
        "```",
        "> Task :run",
        "[27-Apr-2077 12:34:56:789] [DEBUG] [Main:10] - Gradle boot camp",
        "```",
        "",
        "This can be changed from the `src/main/resources/log4j2.properties` file.",
        "",
        "```",
        "appender.stdout.layout.pattern = [%d{dd-MMM-yyy HH:mm:ss:SSS}] [%p] [%c{1}:%L] - %m%n",
        "```",
        "",
        "This concludes are section about dependencies.  Let's commit our changes before heading to the next section.",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "command",
      "id": "d195c2bb-2a4e-444f-b706-75ed93d3825f",
      "workingDirectory": "single-java-project",
      "parameters": [
        "git add .",
        "git commit --message 'Use logger instead of stdout'"
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "section",
      "id": "ef6f1360-2730-496b-b377-39d37e81403c",
      "workingDirectory": "single-java-project",
      "parameters": [
        "The dependency check plugin"
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "markdown",
      "id": "8870eb1f-fa36-4481-87cf-acfe0b749ae2",
      "workingDirectory": "single-java-project",
      "parameters": [
        "In the previous section we used a vulnerable dependency on purpose, an old and vulnerable version of Log4J. In this",
        "section we will add a new Gradle plugin that helps us scan for such vulnerabilities.",
        "",
        "Let's tag our project so that we have a reference point.",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "command",
      "id": "83fa7fef-54fd-4bdb-ab77-9b7c74617966",
      "workingDirectory": "single-java-project",
      "parameters": [
        "git tag --annotate 'v4' --message 'The dependency check plugin'"
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "markdown",
      "id": "a56ba1ce-543a-4637-98b1-0c806da1452a",
      "workingDirectory": "single-java-project",
      "parameters": [
        "Let's add",
        "the [`org.owasp.dependencycheck`](https://jeremylong.github.io/DependencyCheck/dependency-check-gradle/index.html)",
        "(referred to as `dependency-check`) plugin.",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "git-apply-patch",
      "id": "e70a83d0-bd32-4938-b286-5b7b8d60e4e0",
      "workingDirectory": "single-java-project",
      "parameters": [
        "diff --git a/build.gradle b/build.gradle",
        "index 47fe21e..fc30f2d 100644",
        "--- a/build.gradle",
        "+++ b/build.gradle",
        "@@ -1,5 +1,6 @@",
        " plugins {",
        "     id 'application'",
        "+    id 'org.owasp.dependencycheck' version '6.5.1'",
        " }",
        " ",
        " java {",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "markdown",
      "id": "0117d668-0ef7-41b7-89eb-1a7cff840c37",
      "workingDirectory": "single-java-project",
      "parameters": [
        "The `dependency-check` plugin add new tasks to our Gradle project.",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "command",
      "id": "4ac6876a-6ad4-4997-83bc-4e9e6523141e",
      "workingDirectory": "single-java-project",
      "parameters": [
        "./gradlew tasks"
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {},
      "commandTimeout": 30.000000000
    },
    {
      "type": "markdown",
      "id": "f7ba8527-e8c8-45dd-af98-07667dead1db",
      "workingDirectory": "single-java-project",
      "parameters": [
        "The `dependency-check` plugin provides four new tasks, under the _OWASP dependency-check tasks_ group.",
        "",
        "```",
        "OWASP dependency-check tasks",
        "----------------------------",
        "dependencyCheckAggregate - Identifies and reports known vulnerabilities (CVEs) in multi-project dependencies.",
        "dependencyCheckAnalyze - Identifies and reports known vulnerabilities (CVEs) in project dependencies.",
        "dependencyCheckPurge - Purges the local cache of the NVD.",
        "dependencyCheckUpdate - Downloads and stores updates from the NVD CVE data feeds.",
        "```",
        "",
        "Let's run",
        "the [`dependencyCheckAnalyze` task](https://jeremylong.github.io/DependencyCheck/dependency-check-gradle/configuration.html).",
        "Please note that this may take several minutes to run as it needs to download the missing vulnerabilities' database.",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "command",
      "id": "31a13efb-a466-4e23-85fb-46291ac89c92",
      "workingDirectory": "single-java-project",
      "parameters": [
        "./gradlew dependencyCheckAnalyze"
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {},
      "commandTimeout": 600.000000000
    },
    {
      "type": "markdown",
      "id": "e9e3fd32-d65e-4414-8eba-50ce30275768",
      "workingDirectory": "single-java-project",
      "parameters": [
        "The `dependencyCheckAnalyze` task will produce a report under the `build/reports` directory."
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "command",
      "id": "a3852a80-4de2-4b3b-9ae1-24a5efb050e2",
      "workingDirectory": "single-java-project",
      "parameters": [
        "tree build/reports"
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "markdown",
      "id": "bee6dde9-0f2f-424d-ae00-63e32ada6bab",
      "workingDirectory": "single-java-project",
      "parameters": [
        "The `build/reports/dependency-check-report.html` contains a detailed and interactive description of the vulnerabilities found in our dependencies, including the transitive dependencies.",
        "",
        "```",
        "build/reports",
        "`-- dependency-check-report.html",
        "```",
        "",
        "We are using a vulnerable dependency on purpose, as indicated by the task's output.",
        "",
        "```",
        "One or more dependencies were identified with known vulnerabilities in single-java-project:",
        "",
        "log4j-api-2.14.1.jar (pkg:maven/org.apache.logging.log4j/log4j-api@2.14.1, cpe:2.3:a:apache:log4j:2.14.1:*:*:*:*:*:*:*) : CVE-2021-44832, CVE-2021-45046, CVE-2021-45105",
        "log4j-core-2.14.1.jar (pkg:maven/org.apache.logging.log4j/log4j-core@2.14.1, cpe:2.3:a:apache:log4j:2.14.1:*:*:*:*:*:*:*) : CVE-2021-44228, CVE-2021-44832, CVE-2021-45046, CVE-2021-45105",
        "log4j-slf4j-impl-2.14.1.jar (pkg:maven/org.apache.logging.log4j/log4j-slf4j-impl@2.14.1, cpe:2.3:a:apache:log4j:2.14.1:*:*:*:*:*:*:*) : CVE-2021-44228, CVE-2021-44832, CVE-2021-45046, CVE-2021-45105",
        "```",
        "",
        "Let's run all tests, the `check` task, and see what happens given that we have vulnerable dependencies.",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "command",
      "id": "a27d5c35-9ea1-411b-8532-e72c92ce9807",
      "workingDirectory": "single-java-project",
      "parameters": [
        "./gradlew check"
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "markdown",
      "id": "db6d78a8-d48a-4e10-b624-2faa738c8e5b",
      "workingDirectory": "single-java-project",
      "parameters": [
        "Unfortunately, the tests pass. We have a task that checks the dependencies, but this is not part of our tests. Let's add",
        "the `org.barfuin.gradle.taskinfo` plugin and see what tasks the `check` task depends on.",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "git-apply-patch",
      "id": "efdb06f2-95db-4fb7-afb0-52b0b5230340",
      "workingDirectory": "single-java-project",
      "parameters": [
        "diff --git a/build.gradle b/build.gradle",
        "index fc30f2d..d397ad8 100644",
        "--- a/build.gradle",
        "+++ b/build.gradle",
        "@@ -1,6 +1,7 @@",
        " plugins {",
        "     id 'application'",
        "     id 'org.owasp.dependencycheck' version '6.5.1'",
        "+    id 'org.barfuin.gradle.taskinfo' version '1.3.1'",
        " }",
        " ",
        " java {",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "markdown",
      "id": "7226ae10-139f-437e-ba35-08ff247f0c69",
      "workingDirectory": "single-java-project",
      "parameters": [
        "Let's see what tasks the `check` task depends on. In other words, when we run the `check` task, what other tasks are",
        "executed.",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "command",
      "id": "00365d41-2920-4085-9b09-e524a5ffe449",
      "workingDirectory": "single-java-project",
      "parameters": [
        "./gradlew check tiTree"
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {},
      "commandTimeout": 30.000000000
    },
    {
      "type": "markdown",
      "id": "ace576be-78df-4663-b587-99fcdc54e46a",
      "workingDirectory": "single-java-project",
      "parameters": [
        "The `check` task depends only on the `test` task.",
        "",
        "```",
        "> Task :tiTree",
        ":check                                     (org.gradle.api.DefaultTask)",
        "`--- :test                                 (org.gradle.api.tasks.testing.Test)",
        "     +--- :classes                         (org.gradle.api.DefaultTask)",
        "     |    +--- :compileJava                (org.gradle.api.tasks.compile.JavaCompile)",
        "     |    `--- :processResources           (org.gradle.language.jvm.tasks.ProcessResources)",
        "     `--- :testClasses                     (org.gradle.api.DefaultTask)",
        "          +--- :compileTestJava            (org.gradle.api.tasks.compile.JavaCompile)",
        "          |    `--- :classes               (org.gradle.api.DefaultTask)",
        "          |         +--- :compileJava      (org.gradle.api.tasks.compile.JavaCompile)",
        "          |         `--- :processResources (org.gradle.language.jvm.tasks.ProcessResources)",
        "          `--- :processTestResources       (org.gradle.language.jvm.tasks.ProcessResources)",
        "```",
        "",
        "The dependency check is not part of the `check` task. We need to configure the `check` task and make it depends on",
        "the `dependencyCheckAnalyze` task so that when we run `check`, we run both the tests and the dependency check. Using",
        "vulnerable dependencies is a critical as having faulty code.",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "git-apply-patch",
      "id": "adc6648d-4b4d-4b19-8f22-dafd7d0ccb7b",
      "workingDirectory": "single-java-project",
      "parameters": [
        "diff --git a/build.gradle b/build.gradle",
        "index d397ad8..c960256 100644",
        "--- a/build.gradle",
        "+++ b/build.gradle",
        "@@ -28,3 +28,7 @@ repositories {",
        " dependencies {",
        "     implementation 'org.apache.logging.log4j:log4j-slf4j-impl:2.14.1'",
        " }",
        "+",
        "+tasks.named('check') {",
        "+    dependsOn 'dependencyCheckAnalyze'",
        "+}",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "markdown",
      "id": "dec7c4a9-9f9a-4ff7-b1c5-55d8ffbe11ed",
      "workingDirectory": "single-java-project",
      "parameters": [
        "Let's print the dependency tree for the `check` task again."
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "command",
      "id": "bf4f8641-ca48-4328-945d-8fb5a0ee20cb",
      "workingDirectory": "single-java-project",
      "parameters": [
        "./gradlew check tiTree"
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "markdown",
      "id": "51127ae6-59bf-49cc-ae21-6afbe6a82e96",
      "workingDirectory": "single-java-project",
      "parameters": [
        "The `check` task now depends on the `dependencyCheckAnalyze` too.",
        "",
        "```",
        "> Task :tiTree",
        ":check                                     (org.gradle.api.DefaultTask)",
        "+--- :dependencyCheckAnalyze               (org.owasp.dependencycheck.gradle.tasks.Analyze)",
        "`--- :test                                 (org.gradle.api.tasks.testing.Test)",
        "     +--- :classes                         (org.gradle.api.DefaultTask)",
        "     |    +--- :compileJava                (org.gradle.api.tasks.compile.JavaCompile)",
        "     |    `--- :processResources           (org.gradle.language.jvm.tasks.ProcessResources)",
        "     `--- :testClasses                     (org.gradle.api.DefaultTask)",
        "          +--- :compileTestJava            (org.gradle.api.tasks.compile.JavaCompile)",
        "          |    `--- :classes               (org.gradle.api.DefaultTask)",
        "          |         +--- :compileJava      (org.gradle.api.tasks.compile.JavaCompile)",
        "          |         `--- :processResources (org.gradle.language.jvm.tasks.ProcessResources)",
        "          `--- :processTestResources       (org.gradle.language.jvm.tasks.ProcessResources)",
        "```",
        "",
        "Let's run the `check` tasks again. This will not run the `test` and the `dependencyCheckAnalyze` tasks.",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "command",
      "id": "d006175e-9dbf-48b1-8c11-8f774746bb7b",
      "workingDirectory": "single-java-project",
      "parameters": [
        "./gradlew check"
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {},
      "commandTimeout": 30.000000000
    },
    {
      "type": "markdown",
      "id": "d39293a4-2d71-44e5-8e0a-6bd1ccd36fdd",
      "workingDirectory": "single-java-project",
      "parameters": [
        "The project still make use of vulnerable dependencies",
        "",
        "```",
        "One or more dependencies were identified with known vulnerabilities in single-java-project:",
        "",
        "log4j-api-2.14.1.jar (pkg:maven/org.apache.logging.log4j/log4j-api@2.14.1, cpe:2.3:a:apache:log4j:2.14.1:*:*:*:*:*:*:*) : CVE-2021-44832, CVE-2021-45046, CVE-2021-45105",
        "log4j-core-2.14.1.jar (pkg:maven/org.apache.logging.log4j/log4j-core@2.14.1, cpe:2.3:a:apache:log4j:2.14.1:*:*:*:*:*:*:*) : CVE-2021-44228, CVE-2021-44832, CVE-2021-45046, CVE-2021-45105",
        "log4j-slf4j-impl-2.14.1.jar (pkg:maven/org.apache.logging.log4j/log4j-slf4j-impl@2.14.1, cpe:2.3:a:apache:log4j:2.14.1:*:*:*:*:*:*:*) : CVE-2021-44228, CVE-2021-44832, CVE-2021-45046, CVE-2021-45105",
        "```",
        "",
        "Yes, the `check` tasks succeeds.",
        "",
        "```",
        "BUILD SUCCESSFUL in 11s",
        "3 actionable tasks: 3 executed",
        "```",
        "",
        "We need to [configure](https://jeremylong.github.io/DependencyCheck/dependency-check-gradle/configuration.html)",
        "the `dependencyCheckAnalyze` so that it fails if we have vulnerable dependencies. By default,",
        "the `dependencyCheckAnalyze` tasks does not fail.",
        "",
        "> Specifies if the build should be failed if a CVSS score equal to or above a specified level is identified. The default",
        "> is 11; since the CVSS scores are 0-10, by default the build will never fail. More information on CVSS scores can be",
        "> found at the NVD",
        "",
        "Let's set the `failBuildOnCVSS` property and set this",
        "to [9, fails for critical vulnerabilities only](https://nvd.nist.gov/vuln-metrics/cvss).",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "git-apply-patch",
      "id": "0849fc1d-bf95-4d26-9bf2-7f4b97ed84bb",
      "workingDirectory": "single-java-project",
      "parameters": [
        "diff --git a/build.gradle b/build.gradle",
        "index c960256..ac38c69 100644",
        "--- a/build.gradle",
        "+++ b/build.gradle",
        "@@ -32,3 +32,7 @@ dependencies {",
        " tasks.named('check') {",
        "     dependsOn 'dependencyCheckAnalyze'",
        " }",
        "+",
        "+dependencyCheck {",
        "+    failBuildOnCVSS = 9",
        "+}",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "markdown",
      "id": "d384f378-aabb-40fe-8f5e-b1bc0803abb2",
      "workingDirectory": "single-java-project",
      "parameters": [
        "Let's run `check` again."
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "command",
      "id": "1b6c9e02-2c60-4abf-b497-f5ffb32f6317",
      "workingDirectory": "single-java-project",
      "parameters": [
        "./gradlew check"
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {},
      "expectedExitValue": 1,
      "commandTimeout": 30.000000000
    },
    {
      "type": "markdown",
      "id": "b2083ab2-46e6-4f43-aa15-2bfb1fda9e72",
      "workingDirectory": "single-java-project",
      "parameters": [
        "The task `dependencyCheckAnalyze` failed.",
        "",
        "```",
        "> Task :dependencyCheckAnalyze FAILED",
        "",
        "FAILURE: Build failed with an exception.",
        "",
        "* What went wrong:",
        "Execution failed for task ':dependencyCheckAnalyze'.",
        "> ",
        "  ",
        "  Dependency-Analyze Failure:",
        "  One or more dependencies were identified with vulnerabilities that have a CVSS score greater than '9.0': CVE-2021-45046, CVE-2021-44228",
        "  See the dependency-check report for more details.",
        "```",
        "",
        "and with the `check` task",
        "",
        "```",
        "BUILD FAILED in 4s",
        "1 actionable task: 1 executed",
        "```",
        "",
        "- **How to investigate this problem?**",
        "",
        "  We can run the `dependencies` task to check what dependencies are being used.",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "command",
      "id": "7d4c8934-4b05-4425-81f5-8547cc423b18",
      "workingDirectory": "single-java-project",
      "parameters": [
        "./gradlew dependencies --configuration compileClasspath"
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "markdown",
      "id": "294de2e5-2e7a-4ca0-90cb-8fcf407221af",
      "workingDirectory": "single-java-project",
      "parameters": [
        "The following three dependencies are used when the code is compiled.",
        "",
        "```",
        "compileClasspath - Compile classpath for source set 'main'.",
        "\\--- org.apache.logging.log4j:log4j-slf4j-impl:2.14.1",
        "     +--- org.slf4j:slf4j-api:1.7.25",
        "     \\--- org.apache.logging.log4j:log4j-api:2.14.1",
        "```",
        "",
        "We set the `--configuration` to `compileClasspath`. Now let's see what dependencies are used when we run the",
        "application.",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "command",
      "id": "ae553361-5cf3-4374-ba23-0a38fb9027e7",
      "workingDirectory": "single-java-project",
      "parameters": [
        "./gradlew dependencies --configuration runtimeClasspath"
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "markdown",
      "id": "40fc02b0-0c2f-45d1-9e23-a1c250175cee",
      "workingDirectory": "single-java-project",
      "parameters": [
        "Note that runtime make use of more dependencies.",
        "",
        "```",
        "runtimeClasspath - Runtime classpath of source set 'main'.",
        "\\--- org.apache.logging.log4j:log4j-slf4j-impl:2.14.1",
        "     +--- org.slf4j:slf4j-api:1.7.25",
        "     +--- org.apache.logging.log4j:log4j-api:2.14.1",
        "     \\--- org.apache.logging.log4j:log4j-core:2.14.1",
        "          \\--- org.apache.logging.log4j:log4j-api:2.14.1",
        "```",
        "",
        "- **Why is this important?**",
        "",
        "  The vulnerable dependency may be found in the runtime and not compile time.",
        "",
        "The `dependencyCheckAnalyze` indicated that the faulty dependency is `org.apache.logging.log4j/log4j-api`. Let's see",
        "what is pulling this dependency. In our dependencies, we only included",
        "the `org.apache.logging.log4j:log4j-slf4j-impl:2.14.1` dependency.",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "command",
      "id": "7af1b1b4-c9c4-45ec-a323-a9c57940a86b",
      "workingDirectory": "single-java-project",
      "parameters": [
        "./gradlew dependencyInsight --dependency org.apache.logging.log4j:log4j-api --configuration compileClasspath"
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "markdown",
      "id": "231ac9da-f73f-441b-8bba-1bee18705768",
      "workingDirectory": "single-java-project",
      "parameters": [
        "In fact, this transitive dependency was pulled in by our dependency.",
        "",
        "```",
        "org.apache.logging.log4j:log4j-api:2.14.1",
        "\\--- org.apache.logging.log4j:log4j-slf4j-impl:2.14.1",
        "     \\--- compileClasspath",
        "```",
        "",
        "The `dependencyInsight` task is quite useful to determine why a dependency ended up in our project.",
        "",
        "Let's set the version of the transitive dependency `org.apache.logging.log4j:log4j-api` to `2.17.1`.",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "git-apply-patch",
      "id": "7830818e-6fab-4f72-8d0a-6a3daf1a6f39",
      "workingDirectory": "single-java-project",
      "parameters": [
        "diff --git a/build.gradle b/build.gradle",
        "index ac38c69..fd737d9 100644",
        "--- a/build.gradle",
        "+++ b/build.gradle",
        "@@ -26,6 +26,7 @@ repositories {",
        " }",
        " ",
        " dependencies {",
        "+    implementation 'org.apache.logging.log4j:log4j-api:2.17.1'",
        "     implementation 'org.apache.logging.log4j:log4j-slf4j-impl:2.14.1'",
        " }",
        " ",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "markdown",
      "id": "fd502603-5c51-4215-ac35-b9ee5a18b39a",
      "workingDirectory": "single-java-project",
      "parameters": [
        "Now we have two different versions of the same dependency, `2.14.1` and `2.17.1`. Let's check the dependencies again.",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "command",
      "id": "9dd13b73-14f1-4a76-b07a-51b6227462c4",
      "workingDirectory": "single-java-project",
      "parameters": [
        "./gradlew dependencies --configuration compileClasspath"
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "markdown",
      "id": "dc26cf73-2e56-4ba1-a9d9-c771b92c9a06",
      "workingDirectory": "single-java-project",
      "parameters": [
        "Both version are listed.",
        "",
        "```",
        "compileClasspath - Compile classpath for source set 'main'.",
        "+--- org.apache.logging.log4j:log4j-api:2.17.1",
        "\\--- org.apache.logging.log4j:log4j-slf4j-impl:2.14.1",
        "     +--- org.slf4j:slf4j-api:1.7.25",
        "     \\--- org.apache.logging.log4j:log4j-api:2.14.1 -> 2.17.1",
        "```",
        "",
        "- **Which version will be used?**",
        "",
        "  Gradle will always use the latest version as indicated by the `->`",
        "",
        "  ```",
        "       \\--- org.apache.logging.log4j:log4j-api:2.14.1 -> 2.17.1",
        "  ```",
        "",
        "Now let's change our version from `2.17.1` and `2.12.1`.",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "git-apply-patch",
      "id": "7b2f4305-5c43-4841-bfde-c44793a59ac2",
      "workingDirectory": "single-java-project",
      "parameters": [
        "diff --git a/build.gradle b/build.gradle",
        "index fd737d9..79ae6e6 100644",
        "--- a/build.gradle",
        "+++ b/build.gradle",
        "@@ -26,7 +26,7 @@ repositories {",
        " }",
        " ",
        " dependencies {",
        "-    implementation 'org.apache.logging.log4j:log4j-api:2.17.1'",
        "+    implementation 'org.apache.logging.log4j:log4j-api:2.12.1'",
        "     implementation 'org.apache.logging.log4j:log4j-slf4j-impl:2.14.1'",
        " }",
        " ",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "markdown",
      "id": "4541438a-15a9-45ed-a892-f65bbafb52f9",
      "workingDirectory": "single-java-project",
      "parameters": [
        "Let's check again and see which dependency is used.",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "command",
      "id": "575f68b7-e1a8-420d-b9f4-4394ad38008e",
      "workingDirectory": "single-java-project",
      "parameters": [
        "./gradlew dependencies --configuration compileClasspath"
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "markdown",
      "id": "25867a3d-3f4c-41be-895f-a79260cf9c4e",
      "workingDirectory": "single-java-project",
      "parameters": [
        "Note that Gradle will go for the latest version, even if this is a transitive dependency.",
        "",
        "```",
        "compileClasspath - Compile classpath for source set 'main'.",
        "+--- org.apache.logging.log4j:log4j-api:2.12.1 -> 2.14.1",
        "\\--- org.apache.logging.log4j:log4j-slf4j-impl:2.14.1",
        "     +--- org.slf4j:slf4j-api:1.7.25",
        "     \\--- org.apache.logging.log4j:log4j-api:2.14.1",
        "```",
        "",
        "In this case, version `2.14.1` is used and not the `2.12.1` we included.",
        "",
        "Let's head back the dependency problem and bump up the version of `org.apache.logging.log4j:log4j-slf4j-impl`",
        "dependency.",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "git-apply-patch",
      "id": "128d3439-8830-4a9a-aa40-6553d6dda553",
      "workingDirectory": "single-java-project",
      "parameters": [
        "diff --git a/build.gradle b/build.gradle",
        "index 79ae6e6..c04016e 100644",
        "--- a/build.gradle",
        "+++ b/build.gradle",
        "@@ -26,8 +26,7 @@ repositories {",
        " }",
        " ",
        " dependencies {",
        "-    implementation 'org.apache.logging.log4j:log4j-api:2.12.1'",
        "-    implementation 'org.apache.logging.log4j:log4j-slf4j-impl:2.14.1'",
        "+    implementation 'org.apache.logging.log4j:log4j-slf4j-impl:2.17.1'",
        " }",
        " ",
        " tasks.named('check') {",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "markdown",
      "id": "b6e07dbe-60de-49d9-a1b6-0737a306db6d",
      "workingDirectory": "single-java-project",
      "parameters": [
        "Let's run the `check` task again."
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "command",
      "id": "17e13142-bae4-4953-873e-1f4d1ca5cca4",
      "workingDirectory": "single-java-project",
      "parameters": [
        "./gradlew check"
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {},
      "commandTimeout": 30.000000000
    },
    {
      "type": "markdown",
      "id": "18bc956f-96c3-48d0-983f-08fb6c090532",
      "workingDirectory": "single-java-project",
      "parameters": [
        "The `check` task finished successfully. The `dependencyCheckAnalyze` task ensures that our dependencies do not contain",
        "vulnerabilities. The `dependencyCheckAnalyze` can be triggered daily on a pipeline to make sure that projects that are",
        "not being actively developed do not contain vulnerable dependencies. Dedicated services,",
        "like [dependabot](https://github.com/dependabot), can be configured to do the same thing. These services can also be",
        "configured to create pull-requests to update to a safe version.",
        "",
        "This concludes this section. Let's commit our changes before moving on.",
        ""
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "command",
      "id": "e3e09122-9c7b-44f7-99d3-7272f358f055",
      "workingDirectory": "single-java-project",
      "parameters": [
        "git add .",
        "git commit --message 'Fix log4j vulnerability'"
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "section",
      "id": "33c1d390-23f4-44d6-9c8d-79232bafb7d9",
      "workingDirectory": "single-java-project",
      "parameters": [
        "Testing"
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "todo",
      "id": "7bfc2d05-61cc-4f8a-a4c1-7f0620625fc4",
      "workingDirectory": "single-java-project",
      "parameters": [
        "Add testing"
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "section",
      "id": "7a0a2fd9-2083-4567-b906-743253bc2428",
      "workingDirectory": "single-java-project",
      "parameters": [
        "Package the application"
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    },
    {
      "type": "todo",
      "id": "d5d4774e-bf12-4c46-a669-2defd11c812d",
      "workingDirectory": "single-java-project",
      "parameters": [
        "The application is not yet ready as the JAR file does not contain the dependencies and running it will fail.  Consider adding [ShadowJar gradle plugin](https://plugins.gradle.org/plugin/com.github.johnrengelman.shadow)."
      ],
      "variables": [],
      "environmentVariables": [],
      "values": {}
    }
  ]
}